<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GALAXIA Launcher</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin:0;
  font-family:Segoe UI, Arial;
  background:radial-gradient(circle at top,#1b2a4a,#05060a);
  color:#fff;
  overflow:hidden;
}
#app { display:flex; height:100vh; }

aside {
  width:220px;
  background:#0a1020;
  padding:15px;
}
aside h1 { font-size:20px; }
aside button {
  width:100%;
  margin:6px 0;
  padding:10px;
  background:#1c2a4a;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

main {
  flex:1;
  padding:20px;
  overflow:auto;
}

.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:15px;
}

.card {
  background:#101830;
  border-radius:10px;
  padding:10px;
  cursor:pointer;
  transition:.2s;
}
.card:hover { transform:scale(1.05); background:#182450; }

.card img {
  width:100%;
  height:100px;
  object-fit:cover;
  border-radius:6px;
}

.card h3 { margin:8px 0 4px; font-size:15px; }
.card p { font-size:12px; opacity:.7 }

#player {
  position:fixed;
  inset:0;
  background:black;
  display:none;
  z-index:10;
}

#player iframe {
  width:100%;
  height:100%;
  border:none;
}

.topbar {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:15px;
}

input[type=file] { display:none; }

.fullbtn {
  position:absolute;
  top:10px;
  right:10px;
  padding:10px;
  z-index:20;
}
</style>
</head>

<body>
<div id="app">
  <aside>
    <h1>ðŸŒŒ GALAXIA</h1>
    <button onclick="show('library')">Library</button>
    <button onclick="show('installed')">Installed</button>
    <button onclick="install()">Install Game</button>
  </aside>

  <main>
    <div class="topbar">
      <h2 id="title">Library</h2>
      <input id="search" placeholder="Search games..." oninput="render()">
    </div>

    <div id="content" class="grid"></div>
  </main>
</div>

<div id="player">
  <button class="fullbtn" onclick="toggleFS()">â›¶ Fullscreen</button>
  <iframe id="gameFrame"></iframe>
</div>

<input type="file" id="folder" webkitdirectory>

<script>
let games = JSON.parse(localStorage.getItem("galaxia_games")||"[]");
let view="library";

function show(v){ view=v; document.getElementById("title").innerText=v; render(); }

function render(){
  const c=document.getElementById("content");
  c.innerHTML="";
  const q=document.getElementById("search").value.toLowerCase();
  games.filter(g=>g.name.toLowerCase().includes(q)).forEach(g=>{
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`
      <img src="${g.icon||'https://picsum.photos/400/200?random='+Math.random()}">
      <h3>${g.name}</h3>
      <p>${g.type}</p>
    `;
    d.onclick=()=>play(g);
    c.appendChild(d);
  });
}

function install(){
  const f=document.getElementById("folder");
  f.onchange=()=>{
    const files=[...f.files];
    let entry=files.find(x=>x.name==="index.html");
    if(!entry){ alert("No index.html found"); return; }
    const url=URL.createObjectURL(entry);
    games.push({
      name:f.files[0].webkitRelativePath.split("/")[0],
      url:url,
      type:"HTML",
      played:0
    });
    localStorage.setItem("galaxia_games",JSON.stringify(games));
    render();
  };
  f.click();
}

function play(g){
  document.getElementById("player").style.display="block";
  const iframe=document.getElementById("gameFrame");
  iframe.src=g.url;
  g.played++;
  localStorage.setItem("galaxia_games",JSON.stringify(games));
}

function toggleFS(){
  const p=document.getElementById("player");
  if(!document.fullscreenElement) p.requestFullscreen();
  else document.exitFullscreen();
}

document.addEventListener("keydown",e=>{
  if(e.key==="Escape"){
    document.getElementById("player").style.display="none";
    document.exitFullscreen();
  }
});

render();
</script>
</body>
</html>
